kind: pipeline
type: docker
name: automation_poc_pipeline

platform:
  os: linux
  arch: amd64

steps:
- name: Install packages
  image: node:16
  commands:
  - npm install

- name: Lint and test
  image: node:16
  commands: 
  - npm run lint
  - npm run test

- name : Build and deploy
  image: node:16
  commands: 
  - npm run build
  - npm run deploy
  environment:
  CDK_AWS_ACCOUNT_ID:
    from_secret: CDK_AWS_ACCOUNT_ID
  CDK_AWS_REGION:
    from_secret: CDK_AWS_ACCOUNT_REGION
  
